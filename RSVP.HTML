<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>
<body>
    <section class="section">
        <div class="container">
            <h1 class="title has-text-centered">RSVP</h1>
            <form id="rsvpForm">
                <div class="field">
                    <label class="label">Family Name</label>
                    <div class="control">
                        <input class="input" type="text" id="familyName" placeholder="Enter your family name" required>
                    </div>
                </div>
              
                <div class="field">
                    <label class="label">Address</label>
                    <div class="control">
                        <input class="input" type="text" id="address" placeholder="Enter your address" required>
                    </div>
                </div>
              
                <div class="field">
                    <label class="label">Number of Guests</label>
                    <div class="control">
                        <input class="input" type="number" id="numberOfGuests" placeholder="Enter number of guests" required>
                    </div>
                </div>
              
                <div class="field">
                    <label class="label">Names of Those Attending</label>
                    <div class="control">
                        <textarea class="textarea" id="namesOfGuests" placeholder="Enter the names of guests" required></textarea>
                    </div>
                </div>
              
                <!-- Optional Email Field -->
                <div class="field">
                    <label class="label">Email (Optional)</label>
                    <div class="control">
                        <input class="input" type="email" id="email" placeholder="Enter your email">
                    </div>
                </div>
              
                <!-- Optional Phone Number Field -->
                <div class="field">
                    <label class="label">Phone Number (Optional)</label>
                    <div class="control">
                        <input class="input" type="tel" id="phoneNumber" placeholder="Enter your phone number">
                    </div>
                </div>
              
                <div class="control">
                    <button class="button is-link" type="submit">submit</button>
                </div>
            </form>              
        </div>
    </section>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAbx51F7JVKrOAe7CqRnNhYtVMtfwYD35Q",
            authDomain: "weddingrt-ce617.firebaseapp.com",
            projectId: "weddingrt-ce617",
            storageBucket: "weddingrt-ce617.appspot.com",
            messagingSenderId: "544778217724",
            appId: "1:544778217724:web:e87f02185359e4c59d4f79"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Handle form submission
        document.getElementById('rsvpForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from submitting the traditional way

            const familyName = document.getElementById('familyName').value;
            const address = document.getElementById('address').value;
            const numberOfGuests = document.getElementById('numberOfGuests').value;
            const namesOfGuests = document.getElementById('namesOfGuests').value;
            const email = document.getElementById('email').value || null; // Optional
            const phoneNumber = document.getElementById('phoneNumber').value || null; // Optional

            // Add RSVP to Firestore
            db.collection("rsvps").add({
                familyName: familyName,
                address: address,
                numberOfGuests: parseInt(numberOfGuests),
                namesOfGuests: namesOfGuests,
                email: email,  // Optional field
                phoneNumber: phoneNumber  // Optional field
            }).then(() => {
                alert('RSVP submitted successfully!');
                document.getElementById('rsvpForm').reset(); // Clear the form
            }).catch((error) => {
                console.error("Error submitting RSVP: ", error);
            });
        });
    </script>
</body>
</html>
